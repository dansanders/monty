## Problem 12: Highly Divisible Triangular Number

import sieve::divisor_count

fn divide_even(n: Int) -> Int:
    match 2.divides(n):
        true => n / 2
        false => n

fn solve(N: Int) -> Int:
    # TODO: Initialize our own sieve instance?
    b = divisor_count::divisor_count(1)
    for n in count(1):
        a, b = b, divisor_count::divisor_count(divide_even(n + 1))
        if a * b > N:
            return n * (n + 1) / 2
    unreachable

test example:
    expect solve(5) == 28
